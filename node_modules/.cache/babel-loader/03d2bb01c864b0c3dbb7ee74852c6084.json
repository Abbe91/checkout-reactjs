{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport React from 'react';\nimport { connect } from 'mini-store';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport createChainedFunction from \"rc-util/es/createChainedFunction\";\nimport shallowEqual from 'shallowequal';\nimport classNames from 'classnames';\nimport { getKeyFromChildrenIndex, loopMenuItem, noop, menuAllProps, isMobileDevice } from './util';\nimport DOMWrap from './DOMWrap';\n\nfunction allDisabled(arr) {\n  if (!arr.length) {\n    return true;\n  }\n\n  return arr.every(function (c) {\n    return !!c.props.disabled;\n  });\n}\n\nfunction updateActiveKey(store, menuId, activeKey) {\n  var state = store.getState();\n  store.setState({\n    activeKey: _objectSpread(_objectSpread({}, state.activeKey), {}, _defineProperty({}, menuId, activeKey))\n  });\n}\n\nfunction getEventKey(props) {\n  // when eventKey not available ,it's menu and return menu id '0-menu-'\n  return props.eventKey || '0-menu-';\n}\n\nexport function getActiveKey(props, originalActiveKey) {\n  var activeKey = originalActiveKey;\n  var children = props.children,\n      eventKey = props.eventKey;\n\n  if (activeKey) {\n    var found;\n    loopMenuItem(children, function (c, i) {\n      if (c && c.props && !c.props.disabled && activeKey === getKeyFromChildrenIndex(c, eventKey, i)) {\n        found = true;\n      }\n    });\n\n    if (found) {\n      return activeKey;\n    }\n  }\n\n  activeKey = null;\n\n  if (props.defaultActiveFirst) {\n    loopMenuItem(children, function (c, i) {\n      if (!activeKey && c && !c.props.disabled) {\n        activeKey = getKeyFromChildrenIndex(c, eventKey, i);\n      }\n    });\n    return activeKey;\n  }\n\n  return activeKey;\n}\nexport function saveRef(c) {\n  if (c) {\n    var index = this.instanceArray.indexOf(c);\n\n    if (index !== -1) {\n      // update component if it's already inside instanceArray\n      this.instanceArray[index] = c;\n    } else {\n      // add component if it's not in instanceArray yet;\n      this.instanceArray.push(c);\n    }\n  }\n}\n\nvar SubPopupMenu =\n/** @class */\nfunction () {\n  var SubPopupMenu = /*#__PURE__*/function (_React$Component) {\n    _inherits(SubPopupMenu, _React$Component);\n\n    var _super = _createSuper(SubPopupMenu);\n\n    function SubPopupMenu(props) {\n      var _this;\n\n      _classCallCheck(this, SubPopupMenu);\n\n      _this = _super.call(this, props);\n      /**\n       * all keyboard events callbacks run from here at first\n       *\n       * note:\n       *  This legacy code that `onKeyDown` is called by parent instead of dom self.\n       *  which need return code to check if this event is handled\n       */\n\n      _this.onKeyDown = function (e, callback) {\n        var keyCode = e.keyCode;\n        var handled;\n\n        _this.getFlatInstanceArray().forEach(function (obj) {\n          if (obj && obj.props.active && obj.onKeyDown) {\n            handled = obj.onKeyDown(e);\n          }\n        });\n\n        if (handled) {\n          return 1;\n        }\n\n        var activeItem = null;\n\n        if (keyCode === KeyCode.UP || keyCode === KeyCode.DOWN) {\n          activeItem = _this.step(keyCode === KeyCode.UP ? -1 : 1);\n        }\n\n        if (activeItem) {\n          e.preventDefault();\n          updateActiveKey(_this.props.store, getEventKey(_this.props), activeItem.props.eventKey);\n\n          if (typeof callback === 'function') {\n            callback(activeItem);\n          }\n\n          return 1;\n        }\n\n        return undefined;\n      };\n\n      _this.onItemHover = function (e) {\n        var key = e.key,\n            hover = e.hover;\n        updateActiveKey(_this.props.store, getEventKey(_this.props), hover ? key : null);\n      };\n\n      _this.onDeselect = function (selectInfo) {\n        _this.props.onDeselect(selectInfo);\n      };\n\n      _this.onSelect = function (selectInfo) {\n        _this.props.onSelect(selectInfo);\n      };\n\n      _this.onClick = function (e) {\n        _this.props.onClick(e);\n      };\n\n      _this.onOpenChange = function (e) {\n        _this.props.onOpenChange(e);\n      };\n\n      _this.onDestroy = function (key) {\n        /* istanbul ignore next */\n        _this.props.onDestroy(key);\n      };\n\n      _this.getFlatInstanceArray = function () {\n        return _this.instanceArray;\n      };\n\n      _this.step = function (direction) {\n        var children = _this.getFlatInstanceArray();\n\n        var activeKey = _this.props.store.getState().activeKey[getEventKey(_this.props)];\n\n        var len = children.length;\n\n        if (!len) {\n          return null;\n        }\n\n        if (direction < 0) {\n          children = children.concat().reverse();\n        } // find current activeIndex\n\n\n        var activeIndex = -1;\n        children.every(function (c, ci) {\n          if (c && c.props.eventKey === activeKey) {\n            activeIndex = ci;\n            return false;\n          }\n\n          return true;\n        });\n\n        if (!_this.props.defaultActiveFirst && activeIndex !== -1 && allDisabled(children.slice(activeIndex, len - 1))) {\n          return undefined;\n        }\n\n        var start = (activeIndex + 1) % len;\n        var i = start;\n\n        do {\n          var child = children[i];\n\n          if (!child || child.props.disabled) {\n            i = (i + 1) % len;\n          } else {\n            return child;\n          }\n        } while (i !== start);\n\n        return null;\n      };\n\n      _this.renderCommonMenuItem = function (child, i, extraProps) {\n        var state = _this.props.store.getState();\n\n        var _assertThisInitialize = _assertThisInitialized(_this),\n            props = _assertThisInitialize.props;\n\n        var key = getKeyFromChildrenIndex(child, props.eventKey, i);\n        var childProps = child.props; // https://github.com/ant-design/ant-design/issues/11517#issuecomment-477403055\n\n        if (!childProps || typeof child.type === 'string') {\n          return child;\n        }\n\n        var isActive = key === state.activeKey;\n\n        var newChildProps = _objectSpread(_objectSpread({\n          mode: childProps.mode || props.mode,\n          level: props.level,\n          inlineIndent: props.inlineIndent,\n          renderMenuItem: _this.renderMenuItem,\n          rootPrefixCls: props.prefixCls,\n          index: i,\n          parentMenu: props.parentMenu,\n          // customized ref function, need to be invoked manually in child's componentDidMount\n          manualRef: childProps.disabled ? undefined : createChainedFunction(child.ref, saveRef.bind(_assertThisInitialized(_this))),\n          eventKey: key,\n          active: !childProps.disabled && isActive,\n          multiple: props.multiple,\n          onClick: function onClick(e) {\n            (childProps.onClick || noop)(e);\n\n            _this.onClick(e);\n          },\n          onItemHover: _this.onItemHover,\n          motion: props.motion,\n          subMenuOpenDelay: props.subMenuOpenDelay,\n          subMenuCloseDelay: props.subMenuCloseDelay,\n          forceSubMenuRender: props.forceSubMenuRender,\n          onOpenChange: _this.onOpenChange,\n          onDeselect: _this.onDeselect,\n          onSelect: _this.onSelect,\n          builtinPlacements: props.builtinPlacements,\n          itemIcon: childProps.itemIcon || _this.props.itemIcon,\n          expandIcon: childProps.expandIcon || _this.props.expandIcon\n        }, extraProps), {}, {\n          direction: props.direction\n        }); // ref: https://github.com/ant-design/ant-design/issues/13943\n\n\n        if (props.mode === 'inline' || isMobileDevice()) {\n          newChildProps.triggerSubMenuAction = 'click';\n        }\n\n        return React.cloneElement(child, newChildProps);\n      };\n\n      _this.renderMenuItem = function (c, i, subMenuKey) {\n        /* istanbul ignore if */\n        if (!c) {\n          return null;\n        }\n\n        var state = _this.props.store.getState();\n\n        var extraProps = {\n          openKeys: state.openKeys,\n          selectedKeys: state.selectedKeys,\n          triggerSubMenuAction: _this.props.triggerSubMenuAction,\n          subMenuKey: subMenuKey\n        };\n        return _this.renderCommonMenuItem(c, i, extraProps);\n      };\n\n      props.store.setState({\n        activeKey: _objectSpread(_objectSpread({}, props.store.getState().activeKey), {}, _defineProperty({}, props.eventKey, getActiveKey(props, props.activeKey)))\n      });\n      _this.instanceArray = [];\n      return _this;\n    }\n\n    _createClass(SubPopupMenu, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        // invoke customized ref to expose component to mixin\n        if (this.props.manualRef) {\n          this.props.manualRef(this);\n        }\n      }\n    }, {\n      key: \"shouldComponentUpdate\",\n      value: function shouldComponentUpdate(nextProps) {\n        return this.props.visible || nextProps.visible || this.props.className !== nextProps.className || !shallowEqual(this.props.style, nextProps.style);\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        var props = this.props;\n        var originalActiveKey = 'activeKey' in props ? props.activeKey : props.store.getState().activeKey[getEventKey(props)];\n        var activeKey = getActiveKey(props, originalActiveKey);\n\n        if (activeKey !== originalActiveKey) {\n          updateActiveKey(props.store, getEventKey(props), activeKey);\n        } else if ('activeKey' in prevProps) {\n          // If prev activeKey is not same as current activeKey,\n          // we should set it.\n          var prevActiveKey = getActiveKey(prevProps, prevProps.activeKey);\n\n          if (activeKey !== prevActiveKey) {\n            updateActiveKey(props.store, getEventKey(props), activeKey);\n          }\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this2 = this;\n\n        var props = _extends({}, this.props);\n\n        this.instanceArray = [];\n        var className = classNames(props.prefixCls, props.className, \"\".concat(props.prefixCls, \"-\").concat(props.mode));\n        var domProps = {\n          className: className,\n          // role could be 'select' and by default set to menu\n          role: props.role || 'menu'\n        };\n\n        if (props.id) {\n          domProps.id = props.id;\n        }\n\n        if (props.focusable) {\n          domProps.tabIndex = 0;\n          domProps.onKeyDown = this.onKeyDown;\n        }\n\n        var prefixCls = props.prefixCls,\n            eventKey = props.eventKey,\n            visible = props.visible,\n            level = props.level,\n            mode = props.mode,\n            overflowedIndicator = props.overflowedIndicator,\n            theme = props.theme;\n        menuAllProps.forEach(function (key) {\n          return delete props[key];\n        }); // Otherwise, the propagated click event will trigger another onClick\n\n        delete props.onClick;\n        return React.createElement(DOMWrap, Object.assign({}, props, {\n          prefixCls: prefixCls,\n          mode: mode,\n          tag: \"ul\",\n          level: level,\n          theme: theme,\n          visible: visible,\n          overflowedIndicator: overflowedIndicator\n        }, domProps), React.Children.map(props.children, function (c, i) {\n          return _this2.renderMenuItem(c, i, eventKey || '0-menu-');\n        }));\n      }\n    }]);\n\n    return SubPopupMenu;\n  }(React.Component);\n\n  SubPopupMenu.defaultProps = {\n    prefixCls: 'rc-menu',\n    className: '',\n    mode: 'vertical',\n    level: 1,\n    inlineIndent: 24,\n    visible: true,\n    focusable: true,\n    style: {},\n    manualRef: noop\n  };\n  return SubPopupMenu;\n}();\n\nexport { SubPopupMenu };\nvar connected = connect()(SubPopupMenu);\nexport default connected;","map":{"version":3,"sources":["C:/Users/wODe/Desktop/School WIE19/Reactkurs/Checkout/checkout-reactjs/node_modules/rc-menu/es/SubPopupMenu.js"],"names":["_extends","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Date","prototype","toString","call","e","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","target","i","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","React","connect","KeyCode","createChainedFunction","shallowEqual","classNames","getKeyFromChildrenIndex","loopMenuItem","noop","menuAllProps","isMobileDevice","DOMWrap","allDisabled","arr","every","c","props","disabled","updateActiveKey","store","menuId","activeKey","state","getState","setState","getEventKey","eventKey","getActiveKey","originalActiveKey","children","found","defaultActiveFirst","saveRef","index","instanceArray","indexOf","SubPopupMenu","_React$Component","_super","_this","onKeyDown","callback","keyCode","handled","getFlatInstanceArray","obj","active","activeItem","UP","DOWN","step","preventDefault","undefined","onItemHover","hover","onDeselect","selectInfo","onSelect","onClick","onOpenChange","onDestroy","direction","len","concat","reverse","activeIndex","ci","slice","start","child","renderCommonMenuItem","extraProps","_assertThisInitialize","childProps","type","isActive","newChildProps","mode","level","inlineIndent","renderMenuItem","rootPrefixCls","prefixCls","parentMenu","manualRef","ref","bind","multiple","motion","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","builtinPlacements","itemIcon","expandIcon","triggerSubMenuAction","cloneElement","subMenuKey","openKeys","selectedKeys","value","componentDidMount","shouldComponentUpdate","nextProps","visible","className","style","componentDidUpdate","prevProps","prevActiveKey","render","_this2","domProps","role","id","focusable","tabIndex","overflowedIndicator","theme","createElement","assign","tag","Children","map","Component","defaultProps","connected"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { connect } from 'mini-store';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport createChainedFunction from \"rc-util/es/createChainedFunction\";\nimport shallowEqual from 'shallowequal';\nimport classNames from 'classnames';\nimport { getKeyFromChildrenIndex, loopMenuItem, noop, menuAllProps, isMobileDevice } from './util';\nimport DOMWrap from './DOMWrap';\n\nfunction allDisabled(arr) {\n  if (!arr.length) {\n    return true;\n  }\n\n  return arr.every(function (c) {\n    return !!c.props.disabled;\n  });\n}\n\nfunction updateActiveKey(store, menuId, activeKey) {\n  var state = store.getState();\n  store.setState({\n    activeKey: _objectSpread(_objectSpread({}, state.activeKey), {}, _defineProperty({}, menuId, activeKey))\n  });\n}\n\nfunction getEventKey(props) {\n  // when eventKey not available ,it's menu and return menu id '0-menu-'\n  return props.eventKey || '0-menu-';\n}\n\nexport function getActiveKey(props, originalActiveKey) {\n  var activeKey = originalActiveKey;\n  var children = props.children,\n      eventKey = props.eventKey;\n\n  if (activeKey) {\n    var found;\n    loopMenuItem(children, function (c, i) {\n      if (c && c.props && !c.props.disabled && activeKey === getKeyFromChildrenIndex(c, eventKey, i)) {\n        found = true;\n      }\n    });\n\n    if (found) {\n      return activeKey;\n    }\n  }\n\n  activeKey = null;\n\n  if (props.defaultActiveFirst) {\n    loopMenuItem(children, function (c, i) {\n      if (!activeKey && c && !c.props.disabled) {\n        activeKey = getKeyFromChildrenIndex(c, eventKey, i);\n      }\n    });\n    return activeKey;\n  }\n\n  return activeKey;\n}\nexport function saveRef(c) {\n  if (c) {\n    var index = this.instanceArray.indexOf(c);\n\n    if (index !== -1) {\n      // update component if it's already inside instanceArray\n      this.instanceArray[index] = c;\n    } else {\n      // add component if it's not in instanceArray yet;\n      this.instanceArray.push(c);\n    }\n  }\n}\n\nvar SubPopupMenu =\n/** @class */\nfunction () {\n  var SubPopupMenu = /*#__PURE__*/function (_React$Component) {\n    _inherits(SubPopupMenu, _React$Component);\n\n    var _super = _createSuper(SubPopupMenu);\n\n    function SubPopupMenu(props) {\n      var _this;\n\n      _classCallCheck(this, SubPopupMenu);\n\n      _this = _super.call(this, props);\n      /**\n       * all keyboard events callbacks run from here at first\n       *\n       * note:\n       *  This legacy code that `onKeyDown` is called by parent instead of dom self.\n       *  which need return code to check if this event is handled\n       */\n\n      _this.onKeyDown = function (e, callback) {\n        var keyCode = e.keyCode;\n        var handled;\n\n        _this.getFlatInstanceArray().forEach(function (obj) {\n          if (obj && obj.props.active && obj.onKeyDown) {\n            handled = obj.onKeyDown(e);\n          }\n        });\n\n        if (handled) {\n          return 1;\n        }\n\n        var activeItem = null;\n\n        if (keyCode === KeyCode.UP || keyCode === KeyCode.DOWN) {\n          activeItem = _this.step(keyCode === KeyCode.UP ? -1 : 1);\n        }\n\n        if (activeItem) {\n          e.preventDefault();\n          updateActiveKey(_this.props.store, getEventKey(_this.props), activeItem.props.eventKey);\n\n          if (typeof callback === 'function') {\n            callback(activeItem);\n          }\n\n          return 1;\n        }\n\n        return undefined;\n      };\n\n      _this.onItemHover = function (e) {\n        var key = e.key,\n            hover = e.hover;\n        updateActiveKey(_this.props.store, getEventKey(_this.props), hover ? key : null);\n      };\n\n      _this.onDeselect = function (selectInfo) {\n        _this.props.onDeselect(selectInfo);\n      };\n\n      _this.onSelect = function (selectInfo) {\n        _this.props.onSelect(selectInfo);\n      };\n\n      _this.onClick = function (e) {\n        _this.props.onClick(e);\n      };\n\n      _this.onOpenChange = function (e) {\n        _this.props.onOpenChange(e);\n      };\n\n      _this.onDestroy = function (key) {\n        /* istanbul ignore next */\n        _this.props.onDestroy(key);\n      };\n\n      _this.getFlatInstanceArray = function () {\n        return _this.instanceArray;\n      };\n\n      _this.step = function (direction) {\n        var children = _this.getFlatInstanceArray();\n\n        var activeKey = _this.props.store.getState().activeKey[getEventKey(_this.props)];\n\n        var len = children.length;\n\n        if (!len) {\n          return null;\n        }\n\n        if (direction < 0) {\n          children = children.concat().reverse();\n        } // find current activeIndex\n\n\n        var activeIndex = -1;\n        children.every(function (c, ci) {\n          if (c && c.props.eventKey === activeKey) {\n            activeIndex = ci;\n            return false;\n          }\n\n          return true;\n        });\n\n        if (!_this.props.defaultActiveFirst && activeIndex !== -1 && allDisabled(children.slice(activeIndex, len - 1))) {\n          return undefined;\n        }\n\n        var start = (activeIndex + 1) % len;\n        var i = start;\n\n        do {\n          var child = children[i];\n\n          if (!child || child.props.disabled) {\n            i = (i + 1) % len;\n          } else {\n            return child;\n          }\n        } while (i !== start);\n\n        return null;\n      };\n\n      _this.renderCommonMenuItem = function (child, i, extraProps) {\n        var state = _this.props.store.getState();\n\n        var _assertThisInitialize = _assertThisInitialized(_this),\n            props = _assertThisInitialize.props;\n\n        var key = getKeyFromChildrenIndex(child, props.eventKey, i);\n        var childProps = child.props; // https://github.com/ant-design/ant-design/issues/11517#issuecomment-477403055\n\n        if (!childProps || typeof child.type === 'string') {\n          return child;\n        }\n\n        var isActive = key === state.activeKey;\n\n        var newChildProps = _objectSpread(_objectSpread({\n          mode: childProps.mode || props.mode,\n          level: props.level,\n          inlineIndent: props.inlineIndent,\n          renderMenuItem: _this.renderMenuItem,\n          rootPrefixCls: props.prefixCls,\n          index: i,\n          parentMenu: props.parentMenu,\n          // customized ref function, need to be invoked manually in child's componentDidMount\n          manualRef: childProps.disabled ? undefined : createChainedFunction(child.ref, saveRef.bind(_assertThisInitialized(_this))),\n          eventKey: key,\n          active: !childProps.disabled && isActive,\n          multiple: props.multiple,\n          onClick: function onClick(e) {\n            (childProps.onClick || noop)(e);\n\n            _this.onClick(e);\n          },\n          onItemHover: _this.onItemHover,\n          motion: props.motion,\n          subMenuOpenDelay: props.subMenuOpenDelay,\n          subMenuCloseDelay: props.subMenuCloseDelay,\n          forceSubMenuRender: props.forceSubMenuRender,\n          onOpenChange: _this.onOpenChange,\n          onDeselect: _this.onDeselect,\n          onSelect: _this.onSelect,\n          builtinPlacements: props.builtinPlacements,\n          itemIcon: childProps.itemIcon || _this.props.itemIcon,\n          expandIcon: childProps.expandIcon || _this.props.expandIcon\n        }, extraProps), {}, {\n          direction: props.direction\n        }); // ref: https://github.com/ant-design/ant-design/issues/13943\n\n\n        if (props.mode === 'inline' || isMobileDevice()) {\n          newChildProps.triggerSubMenuAction = 'click';\n        }\n\n        return React.cloneElement(child, newChildProps);\n      };\n\n      _this.renderMenuItem = function (c, i, subMenuKey) {\n        /* istanbul ignore if */\n        if (!c) {\n          return null;\n        }\n\n        var state = _this.props.store.getState();\n\n        var extraProps = {\n          openKeys: state.openKeys,\n          selectedKeys: state.selectedKeys,\n          triggerSubMenuAction: _this.props.triggerSubMenuAction,\n          subMenuKey: subMenuKey\n        };\n        return _this.renderCommonMenuItem(c, i, extraProps);\n      };\n\n      props.store.setState({\n        activeKey: _objectSpread(_objectSpread({}, props.store.getState().activeKey), {}, _defineProperty({}, props.eventKey, getActiveKey(props, props.activeKey)))\n      });\n      _this.instanceArray = [];\n      return _this;\n    }\n\n    _createClass(SubPopupMenu, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        // invoke customized ref to expose component to mixin\n        if (this.props.manualRef) {\n          this.props.manualRef(this);\n        }\n      }\n    }, {\n      key: \"shouldComponentUpdate\",\n      value: function shouldComponentUpdate(nextProps) {\n        return this.props.visible || nextProps.visible || this.props.className !== nextProps.className || !shallowEqual(this.props.style, nextProps.style);\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        var props = this.props;\n        var originalActiveKey = 'activeKey' in props ? props.activeKey : props.store.getState().activeKey[getEventKey(props)];\n        var activeKey = getActiveKey(props, originalActiveKey);\n\n        if (activeKey !== originalActiveKey) {\n          updateActiveKey(props.store, getEventKey(props), activeKey);\n        } else if ('activeKey' in prevProps) {\n          // If prev activeKey is not same as current activeKey,\n          // we should set it.\n          var prevActiveKey = getActiveKey(prevProps, prevProps.activeKey);\n\n          if (activeKey !== prevActiveKey) {\n            updateActiveKey(props.store, getEventKey(props), activeKey);\n          }\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this2 = this;\n\n        var props = _extends({}, this.props);\n\n        this.instanceArray = [];\n        var className = classNames(props.prefixCls, props.className, \"\".concat(props.prefixCls, \"-\").concat(props.mode));\n        var domProps = {\n          className: className,\n          // role could be 'select' and by default set to menu\n          role: props.role || 'menu'\n        };\n\n        if (props.id) {\n          domProps.id = props.id;\n        }\n\n        if (props.focusable) {\n          domProps.tabIndex = 0;\n          domProps.onKeyDown = this.onKeyDown;\n        }\n\n        var prefixCls = props.prefixCls,\n            eventKey = props.eventKey,\n            visible = props.visible,\n            level = props.level,\n            mode = props.mode,\n            overflowedIndicator = props.overflowedIndicator,\n            theme = props.theme;\n        menuAllProps.forEach(function (key) {\n          return delete props[key];\n        }); // Otherwise, the propagated click event will trigger another onClick\n\n        delete props.onClick;\n        return React.createElement(DOMWrap, Object.assign({}, props, {\n          prefixCls: prefixCls,\n          mode: mode,\n          tag: \"ul\",\n          level: level,\n          theme: theme,\n          visible: visible,\n          overflowedIndicator: overflowedIndicator\n        }, domProps), React.Children.map(props.children, function (c, i) {\n          return _this2.renderMenuItem(c, i, eventKey || '0-menu-');\n        }));\n      }\n    }]);\n\n    return SubPopupMenu;\n  }(React.Component);\n\n  SubPopupMenu.defaultProps = {\n    prefixCls: 'rc-menu',\n    className: '',\n    mode: 'vertical',\n    level: 1,\n    inlineIndent: 24,\n    visible: true,\n    focusable: true,\n    style: {},\n    manualRef: noop\n  };\n  return SubPopupMenu;\n}();\n\nexport { SubPopupMenu };\nvar connected = connect()(SubPopupMenu);\nexport default connected;"]},"metadata":{},"sourceType":"module"}